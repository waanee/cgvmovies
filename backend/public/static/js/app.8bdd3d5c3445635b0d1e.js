webpackJsonp([1],{"//Nx":function(t,e){},"/JtZ":function(t,e){},"0A3O":function(t,e){},"1GOj":function(t,e){},DEHJ:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("7+uW"),o=n("mtWM"),a=n.n(o),i=n("NYxO");r.a.use(i.a);var s;(s=localStorage.accessToken)&&(a.a.defaults.headers.common.Authorization="Bearer "+s);var c=new i.a.Store({state:{accessToken:null},getters:{isAuthenticated:function(t){return t.accessToken=t.accessToken||localStorage.accessToken,t.accessToken}},mutations:{LOGIN:function(t,e){var n=e.accessToken;t.accessToken=n,localStorage.accessToken=n},LOGOUT:function(t){t.accessToken=null,delete localStorage.accessToken}},actions:{LOGIN:function(t,e){var n=t.commit,r=e.email,o=e.password;return a.a.post("http://localhost:3000/login",{email:r,password:o}).then(function(t){var e=t.data;n("LOGIN",e),a.a.defaults.headers.common.Authorization="Bearer "+e.accessToken})},LOGOUT:function(t){var e=t.commit;a.a.defaults.headers.common.Authorization=void 0,e("LOGOUT")}}}),u={data:function(){return{welcome:""}},computed:{isAuthenticated:function(){return c.getters.isAuthenticated}},methods:{getWelcom:function(){var t=this;a.a.get("http://localhost:3000/home").then(function(e){return t.welcome=e.data.greeting})},onClickLogout:function(){var t=this;c.dispatch("LOGOUT").then(function(){return t.$router.push("/")})}},created:function(){this.getWelcom()}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("div",{staticClass:"container"},[n("vk-navbar",[n("vk-navbar-nav",{attrs:{slot:"left"},slot:"left"},[n("vk-navbar-logo",[n("router-link",{attrs:{to:"/"}},[t._v("CGV movies")])],1)],1),t._v(" "),n("vk-navbar-nav",{attrs:{slot:"center"},slot:"center"},[t._v("\n            "+t._s(t.welcome)+"\n        ")]),t._v(" "),n("vk-navbar-nav",{attrs:{slot:"right"},slot:"right"},[n("router-link",{attrs:{to:"/loginpage"}},[t._v("Login")]),t._v(" / \n            "),n("router-link",{attrs:{to:"/me"}},[t._v("me")]),t._v(" / \n            "),t.isAuthenticated?n("router-link",{attrs:{to:"/#"},on:{click:function(e){return e.preventDefault(),t.onClickLogout(e)}}},[t._v("logout")]):t._e()],1)],1)],1)])},staticRenderFns:[]};var v=n("VU/8")(u,l,!1,function(t){n("//Nx")},null,null).exports,d={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("footer",[e("div",[this._v("\n        copyright © cgv movies All Rights Reserved.\n    ")])])}]};var m=n("VU/8")({},d,!1,function(t){n("wwgd")},"data-v-34e09814",null).exports,p={name:"App",components:{HeaderComponent:v,FooterComponent:m}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("header-component"),this._v(" "),e("router-view"),this._v(" "),e("footer-component")],1)},staticRenderFns:[]};var f=n("VU/8")(p,h,!1,function(t){n("/JtZ")},null,null).exports,_=n("/ocq"),g={data:function(){return{movies:[]}},created:function(){var t=this;this.$http.get("/api/movies").then(function(e){var n=e.data;t.movies=n.data}).catch(function(t){return consoellog(t)})}},b={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container content-wrap"},[n("h1",[t._v("Movie List")]),t._v(" "),n("router-link",{attrs:{to:"/add/movie"}},[t._v("add movie")]),n("br"),t._v(" "),n("div",{staticClass:"items"},t._l(t.movies,function(e){return n("div",{key:e.id,staticClass:"movie"},[n("router-link",{attrs:{to:{name:"show",params:{id:e.id}}}},[n("img",{attrs:{src:e.poster,alt:""}})]),t._v(" "),n("div",[n("strong",[t._v(t._s(e.name))]),t._v(", "),n("i",[t._v(t._s(e.director))]),t._v(" ["+t._s(e.year)+"]\n            ")])],1)}),0)],1)},staticRenderFns:[]};var y=n("VU/8")(g,b,!1,function(t){n("U3gt")},"data-v-434622b8",null).exports,w={data:function(){return{movie:[]}},methods:{showMovie:function(){var t=this,e=this.$route.params.id;this.$http.get("/api/movies/"+e).then(function(e){var n=e.data;t.movie=n.data}).catch(function(t){return consorl.log(t)})},deleteItem:function(){var t=this,e=this.$route.params.id;this.$http.delete("/api/movies/"+e).then(function(e){var n=e.data;t.movie=n.data}).catch(function(t){return consorl.log(t)}),this.$router.push("/")},modifyItem:function(){var t=this.$route.params.id;this.$router.push("/edit/movie/"+t)}},created:function(){this.showMovie()}},k={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._l(t.movie,function(e){return n("div",{key:e.id,staticClass:"movie"},[n("h1",[t._v(t._s(e.name))]),t._v(" "),n("img",{attrs:{src:e.poster,alt:""}}),t._v(" "),n("p",[t._v("년도 : "+t._s(e.year))]),t._v(" "),n("p",[t._v("주연 : "+t._s(e.director))])])}),t._v(" "),n("button",{on:{click:t.deleteItem}},[t._v("del")]),t._v(" / \n    "),n("button",{on:{click:t.modifyItem}},[t._v("modify")]),t._v(" "),n("br"),t._v(" "),n("a",{attrs:{href:"javascript:history.back();"}},[t._v("back")])],2)},staticRenderFns:[]};var x=n("VU/8")(w,k,!1,function(t){n("mea/")},"data-v-67ddfc0d",null).exports,$={data:function(){return{title:"",year:"",director:"",imgsrc:""}},methods:{addMovie:function(){this.$http.post("/api/movies/",{title:this.title,year:this.year,director:this.director,imgsrc:this.imgsrc}).then(function(t){console.log(t)}).catch(function(t){return consorl.log(t)})}}},L={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v("ADD MOVIE")]),t._v(" "),n("form",{attrs:{action:"/"}},[n("label",{attrs:{for:"title"}}),t._v("\n        제목 : "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),n("br"),t._v(" "),n("label",{attrs:{for:"year"}}),t._v("\n        년도 : "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.year,expression:"year"}],attrs:{type:"text"},domProps:{value:t.year},on:{input:function(e){e.target.composing||(t.year=e.target.value)}}}),n("br"),t._v(" "),n("label",{attrs:{for:"director"}}),t._v("\n        주연 : "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.director,expression:"director"}],attrs:{type:"text"},domProps:{value:t.director},on:{input:function(e){e.target.composing||(t.director=e.target.value)}}}),n("br"),t._v(" "),n("label",{attrs:{for:"imgsrc"}}),t._v("\n        이미지경로 : "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.imgsrc,expression:"imgsrc"}],attrs:{type:"text"},domProps:{value:t.imgsrc},on:{input:function(e){e.target.composing||(t.imgsrc=e.target.value)}}}),n("br"),t._v(" "),n("button",{on:{click:t.addMovie}},[t._v("ADD")])]),t._v(" "),n("br"),t._v(" "),n("a",{attrs:{href:"javascript:history.back();"}},[t._v("back")])])},staticRenderFns:[]};var U=n("VU/8")($,L,!1,function(t){n("0A3O")},null,null).exports,A={data:function(){return{title:"",year:"",director:"",imgsrc:""}},methods:{showMovie:function(){var t=this,e=this.$route.params.id;this.$http.get("/api/movies/"+e).then(function(e){var n=e.data;t.title=n.data[0].name,t.year=n.data[0].year,t.director=n.data[0].director,t.imgsrc=n.data[0].poster}).catch(function(t){return consorl.log(t)})},UpadateMovie:function(){var t=this,e=this.$route.params.id;console.log(this.title),this.$http.put("/api/movies/"+e,{title:this.title,year:this.year,director:this.director,imgsrc:this.imgsrc}).then(function(n){console.log(n),t.$router.push("/movie/"+e)}).catch(function(t){return consorl.log(t)})}},created:function(){this.showMovie()}},O={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v("UPDATE MOVIE")]),t._v(" "),n("form",{attrs:{action:"/"}},[n("label",{attrs:{for:"title"}}),t._v("\n        제목 : "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),n("br"),t._v(" "),n("label",{attrs:{for:"year"}}),t._v("\n        년도 : "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.year,expression:"year"}],attrs:{type:"text"},domProps:{value:t.year},on:{input:function(e){e.target.composing||(t.year=e.target.value)}}}),n("br"),t._v(" "),n("label",{attrs:{for:"director"}}),t._v("\n        주연 : "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.director,expression:"director"}],attrs:{type:"text"},domProps:{value:t.director},on:{input:function(e){e.target.composing||(t.director=e.target.value)}}}),n("br"),t._v(" "),n("label",{attrs:{for:"imgsrc"}}),t._v("\n        이미지경로 : "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.imgsrc,expression:"imgsrc"}],attrs:{type:"text"},domProps:{value:t.imgsrc},on:{input:function(e){e.target.composing||(t.imgsrc=e.target.value)}}}),n("br"),t._v(" "),n("button",{on:{click:function(e){return e.preventDefault(),t.UpadateMovie(e)}}},[t._v("modify")])]),t._v(" "),n("br"),t._v(" "),n("a",{attrs:{href:"javascript:history.back();"}},[t._v("back")])])},staticRenderFns:[]};var N=n("VU/8")(A,O,!1,function(t){n("1GOj")},null,null).exports,E={data:function(){return{email:"",password:"",msg:""}},methods:{onSubmit:function(t,e){var n=this;this.$store.dispatch("LOGIN",{email:t,password:e}).then(function(){return n.redirect()}).catch(function(t){var e=t.message;return n.msg=e}),console.log(1)},redirect:function(){var t=window.location.search.replace(/^\?/,"").split("&").reduce(function(t,e){var n=e.split("=");return t[n[0]]=decodeURIComponent(n[1]),t},{}).returnPath;this.$router.push(t)}}},T={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",[t._v("Login")]),t._v(" "),n("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(t.email,t.password)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"text",placeholder:"Email Address"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),n("input",{attrs:{type:"submit",value:"Login"}})]),t._v(" "),n("p",[n("i",[t._v(t._s(t.msg))])])])},staticRenderFns:[]};var M=n("VU/8")(E,T,!1,function(t){n("DEHJ")},null,null).exports,P={data:function(){return{user:null,accessLog:[]}},created:function(){var t=this;a.a.get("http://localhost:3000/me").then(function(e){var n=e.data;return t.user=n.user,t.accessLog=n.accessLog}).catch(function(){t.$store.dispatch("logout").then(function(){return t.$router.push("/")})})}},C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",[t._v("Me")]),t._v(" "),n("div",[n("label",[t._v("User Info:")]),t._v(" "),n("pre",[t._v(t._s(t.user))])]),t._v(" "),n("div",[n("label",[t._v("Access Log:")]),t._v(" "),t._l(t.accessLog,function(e){return n("div",[t._v(t._s(e.userId)+", "+t._s(e.createdAt))])})],2)])},staticRenderFns:[]};var V=n("VU/8")(P,C,!1,function(t){n("c49c")},null,null).exports;r.a.use(_.a);var F=new _.a({mode:"history",routes:[{path:"/",name:"index",component:y},{path:"/movie/:id",name:"show",component:x},{path:"/add/movie/",name:"addmovie",component:U},{path:"/edit/movie/:id",name:"update",component:N},{path:"/loginpage",name:"login",component:M},{path:"/me",name:"Me",component:V,beforeEnter:function(t,e,n){if(c.getters.isAuthenticated)return n();n("/login?returnPath=me")}}]}),I={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("\n    login\n")])},staticRenderFns:[]};var R=n("VU/8")({},I,!1,function(t){n("ZSx0")},null,null).exports,D=n("raD+"),G=n("tLQV");n("feh1");r.a.use(D.a),r.a.use(G.a),r.a.config.productionTip=!1,r.a.prototype.$http=a.a,new r.a({el:"#app",router:F,store:c,components:{App:f,HeaderComponent:v,FooterComponent:m,LoginForm:R},template:"<App/>"})},U3gt:function(t,e){},ZSx0:function(t,e){},c49c:function(t,e){},feh1:function(t,e){},"mea/":function(t,e){},wwgd:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.8bdd3d5c3445635b0d1e.js.map